# AJAX
Это не конкретная технология, а подход к простроению веб-приложений, когда клиент обменивается с сервером данными в фоне.  

## Практическая реализация (XHR)
В **JavaScript** объект **XMLHttpRequest** позволяет делать фоновые **http**-запросы.  

### Пример:  

`var xhr = new XMLHttpRequest();` - инициализируем объект
`xhr.open('GET', 'phones.json', false);` - определяем параметры запроса: метод, путь, синхронность  
`xhr.send();` - отсылаем  

после выполнения доступны поля статуса ответа, поясняющего текста и текста ответа:

* `xhr.status`
* `xhr.statusText`
* `xhr.responseText`

> Синхронный запрос блокирует поток выполнения на странице.

При асинхнонном запросе можно посмотреть статус запроса через `xhr.readyState`  

Можно установить свои заголовки:  
`xhr.setRequestHeader('Content-Type', 'application/json');`  

Получить заголовки ответа, кроме **Set-Cookie**:  
`xhr.getAllResponseHeaders()`  

### События

При запросе через **XMLHttpRequest** бросаются несоклько событий:  

* `loadstart` – запрос начат.
* `progress` – браузер получил пакет данных, можно прочитать данные в **responseText**.
* `abort` – запрос был отменён вызовом `xhr.abort()`.
* `error` – произошла ошибка.
* `load` – запрос был успешно (без ошибок) завершён.
* `timeout` – запрос был прекращён по таймауту.
* `loadend` – запрос был завершён (успешно или неуспешно)

[← Назад](../README.md)