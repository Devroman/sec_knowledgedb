# PostMessagee

Это браузерный механизм общения между окнами/iframe, путем обмена сообщениями, где любой из участником может выступать в роли как отправителя, так и получателя.  

Отправлять можно в конкретный экземпляр `window` или кидать широковещательное сообщение, типа `BroadcastChannel`.  

#### Отправка сообщения

    var popup = window.open(detailt);
    popup.postMessage(message, origin);

где

* `message` - строка сообщения,
* `origin` - [**origin**](./sop.md) получателя.

Последний может быть в значении `*`, тогда получателем может выступать кто угодно.  

Пример широковещательного сообщения:  

    var bc = new BroadcastChannel("channel_name");
    bc.postMessage(message);

### Получение сообщения

    window.addEventListener("message", ourHandler, false);

где  

* `"message"` - событие, на которое подписываемся,
* `ourHandler` - функция обработчик.

В функцию обработчик приходит объект события со свойствами:  

* `data` - данные,
* `origin` - источник сообщения,
* `source` - ссылка на окно отправитель.  

[← Назад](../README.md)