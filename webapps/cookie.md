# Cookie
**Cookie** - механизм хранения данных на стороне клиента, в контексте взаимодействия по [**http**-протоколу](./http_proto.md).

Обычно устанавливаются сервером и хранятся на клиенте, но могут быть установлены и самим клиентом. Посылаются клиентом в заголовках при "каждом" запросе.  

> Ограничение на размер установлено браузерами, в частности IE: 4096 байт.

При установке должны быть указаны пара ключ=значение и могут быть указаны домен, для которого устанавливается кука, путь и дата протухания, после которой кука будет удалена браузером.  
`name=value; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain=example.com`

Поле **domain** и **path** определяют на какие ресурсы должны отсылаться куки при запросе. 

## Использование

* хранение аутентификационных данных(например, после авторизации),
* хранение пользовательских настроек,
* отслеживание сеанса.

## Разновидности

* **Сессионные** - Куки, у которых при установке не была указана дата протухания, будут удалены при закрытии окна браузера, соответственно будут использоваться только в рамках одной пользовательской сессии.  
* **Постоянные** - Куки, у которых выставлена дата протухания.
* **Защищенные** - Передаются только по шифрованному соединению. Для включения нужно указать флаг `Secure`.
* **HttpOnly** - К таким кукам нет доступа из **JS**, устанавливаются только ответом сервера, можно опознать по одноименному флагу `HttpOnly`.

## Установка cookie

### Ответ сервера

    HTTP/1.1 200 OK
    Content-type: text/html
    Set-Cookie: name=value

После которого запросы клиента будут сопровождаться заголовком **Cookie**:  

    GET /test HTTP/1.1
    Host: example.org
    Cookie: name=value

### Силами JS

**document.cookie** - свойство, через которое доступно чтение и установка кук. Простой вызов вернет все доступные для взаимодействия куки.

Установить можно присваиванием свойству строки, описывающей новую куку, при этом старые не будут стерты.

Примеры:  
`document.cookie = "test=asd";`  
`document.cookie = "name=value; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"`  

[← Назад](../README.md)